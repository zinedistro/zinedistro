common: &common
  adapter: <%= ENV.fetch('RAILS_DB_ADAPTER', 'mysql2') %>
  encoding: <%= ENV.fetch('RAILS_DB_ENCODING', 'utf8') %>
  timeout: <%= ENV.fetch('RAILS_DB_TIMEOUT_MS', 5000) %>.to_i
  pool: <%= ENV["DB_POOL"] || ENV['MAX_THREADS'] || 5 %>
  host: <%= ENV.fetch('RAILS_DB_HOST', 'localhost') %>
  port: <%= ENV.fetch('RAILS_DB_PORT', 3306) %>
  username: <%= ENV.fetch('RAILS_DB_USER', 'root') %>
  password: <%= ENV.fetch('RAILS_DB_PASSWORD', '') %>
  ssl_mode: <% ENV.FETCH('RAILS_DB_SSL_MODE', 'verify_identity') %>
  sslca:  <% ENV.FETCH('RAILS_DB_SSL_MODE', '/etc/ssl/cert.pem') %>
  database: <% ENV.FETCH('RAILS_DB_DATABASE', 'zinedistro') %>

development:
  <<: *common
  database: <% ENV.FETCH('RAILS_DB_DATABASE', 'zinedistro_development') %>

test:
  <<: *common
  database: zinedistro_test

production:
  <<: *common
  url:  <%= ENV["DATABASE_URL"] %>
